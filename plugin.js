CKEDITOR.plugins.add("linebreak",{lang:"en,de",requires:"widget",icons:"shy_entity,wbr_tag",hidpi:!1,onLoad:function(){CKEDITOR.addCss("span.cke_shy,span.cke_wbr {background:#afe0ef;}")},init:function(e){var t;e.widgets.add("shyEntity",{pathName:"&amp;shy;",template:(t=new CKEDITOR.htmlParser.element("span",{class:"cke_shy",title:e.lang.linebreak.label_shy}),t.add(new CKEDITOR.htmlParser.text("-")),t.getOuterHtml()),downcast:function(){return new CKEDITOR.htmlParser.text("&shy;")}}),e.widgets.add("wbrTag",{pathName:"wbr",template:function(){var t=new CKEDITOR.htmlParser.element("span",{class:"cke_wbr",title:e.lang.linebreak.label_wbr});return t.add(new CKEDITOR.htmlParser.text("&crarr;")),t.getOuterHtml()}(),downcast:function(){return new CKEDITOR.htmlParser.element("wbr")}}),e.ui.addButton("ShyEntity",{label:e.lang.linebreak.label_shy,toolbar:"linebreak",icon:this.path+"icons/shy_entity.png",command:"shyEntity"}),e.ui.addButton("WbrTag",{label:e.lang.linebreak.label_wbr,toolbar:"linebreak",icon:this.path+"icons/wbr_tag.png",command:"wbrTag"})},afterInit:function(e){e.dataProcessor.dataFilter.addRules({elements:{wbr:function(){var t=new CKEDITOR.htmlParser.element("span",{class:"cke_wbr",title:e.lang.linebreak.label_wbr});return t.add(new CKEDITOR.htmlParser.text("&crarr;")),e.widgets.wrapElement(t,"wbrTag")}},text:function(t){return t.replace(/&shy;|\xAD/g,function(){var t=new CKEDITOR.htmlParser.element("span",{class:"cke_shy",title:e.lang.linebreak.label_shy});return t.add(new CKEDITOR.htmlParser.text("-")),e.widgets.wrapElement(t,"shyEntity").getOuterHtml()})}})}});
